import pprint

from fluxwallet.scripts import Script
from fluxwallet.transactions.transaction import TransactionBuilder

tx_v4 = "0400008085202f8901ec1a3637032f72a8883e907e908f19ddc6f765c84cd15620c9dddef5cf49e976010000006b483045022100e757162ec34525455f0af8ceda2598aa3a0294fb33fb6a07e0f105dd9c5db780022043d940a0764cac1cdc78155daaa5038103e4f2474ed9befcea82de30d727680b012103462c08cec90efd0ae1c757d8d6ebdf8fb66446fa9a4f8ceeca27fb7db23ce3c9ffffffff020065cd1d000000001976a914816348b440dc693297f04c120d92a629ef85324488acbdabb903000000001976a9149a12d8df3b3e69629f87fbe25bd20349fb2b389a88ac00000000afbd13000000000000000000000000"
tx_v1 = "0100000001fa37c73a347e2d76ca469210abaaa9bf1aa6507d0e910b3232cf15365b96e93d000000006b48304502210081530e2bda5bc4e6a79dd53ac5470554c5114017fe3c551b9f629cb9452db89a0220239295c3dffca8ed8c4cb93d77ad69c47cf9a9e8471ed19c7303076012d635b30121039179f6edd6fe4f7e92be427f8f349a8d7944e522051d46a6d55f7fd3e6372842ffffffff0280f0fa02000000001a76a915b89a12d8df3b3e69629f87fbe25bd20349fb2b389a88ac9e73d21a000000001a76a915b877876efdb90d25a137eed8a445107cb1bf12772688ac00000000"
tx_broken_v4 = "0400008085202f8901fa37c73a347e2d76ca469210abaaa9bf1aa6507d0e910b3232cf15365b96e93d000000006b483045022100c4fea78f54be9a3871a1081bc8e34203991c5540c471cdd2e489ed6af896d13f0220743416a313d9318d4513dae496eae62fd6d744becf574b7e7842d6ff77c84df20121039179f6edd6fe4f7e92be427f8f349a8d7944e522051d46a6d55f7fd3e6372842ffffffff0280f0fa02000000001a76a915b89a12d8df3b3e69629f87fbe25bd20349fb2b389a88ac9e73d21a000000001a76a915b877876efdb90d25a137eed8a445107cb1bf12772688ac0000000069be1300000000000000000000000000"

parsed = TransactionBuilder.parse_hex(tx_v4, network="flux")
pprint.pprint(parsed.as_dict())


s = Script.parse_hex("76a914816348b440dc693297f04c120d92a629ef85324488ac")
print(s.serialize().hex())
